import{b as re,j as e,a as z,c as ge}from"./index-DNHKrThd.js";import{r as c}from"./react-vendor-BpgKpUzx.js";import{s as k,a as $}from"./ToastEnhancer-LsyHRCIg.js";import{A as xe}from"./AdvancedFilters-D5PXsfGz.js";import{P as ue}from"./Pagination-MtMwbbp0.js";import{C as ye}from"./ConfirmDialog-DmvZqo8B.js";import{X as be,I as je,g as ve,h as Ce,B as ze,J as Y,K as U,N as Se,O as G,Q as _e,V as Pe,Y as X,F as we,D as ke,S as Be,C as K,a as Ee,t as Te}from"./ui-vendor-yLLZ9URH.js";import{r as j,f as Q,a as Z,b as ee,c as te,d as We,v as Re,e as Ie}from"./formatters-CDm7_xvv.js";import"./pdf-vendor-BOaogWDS.js";const Fe=({columns:u,data:v,emptyMessage:C="Nenhum item encontrado",loading:w=!1,onRowClick:p,keyExtractor:S})=>{const{isMobile:m,isTablet:R}=re(),_=m||R;if(w)return e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Carregando..."});if(v.length===0)return e.jsx("div",{style:{padding:"3rem",textAlign:"center",color:"#64748b"},children:C});if(_){const h=u.filter(a=>!a.hideOnMobile);return e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:v.map(a=>e.jsx("div",{onClick:()=>p==null?void 0:p(a),style:{backgroundColor:"white",borderRadius:"12px",padding:"1rem",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",cursor:p?"pointer":"default",transition:"all 0.2s"},onTouchStart:n=>{p&&(n.currentTarget.style.transform="scale(0.98)",n.currentTarget.style.boxShadow="0 1px 2px 0 rgb(0 0 0 / 0.1)")},onTouchEnd:n=>{n.currentTarget.style.transform="scale(1)",n.currentTarget.style.boxShadow="0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:h.map((n,g)=>{const P=n.render?n.render(a):a[n.key];return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:g===0?"flex-start":"center",padding:g===0?"0 0 0.75rem 0":"0.5rem 0",borderBottom:g<h.length-1?"1px solid #f1f5f9":"none"},children:[e.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:g===0?"600":"400",color:g===0?"#1e293b":"#64748b"},children:[n.label,":"]}),e.jsx("span",{style:{fontSize:g===0?"1rem":"0.875rem",fontWeight:g===0?"600":"400",color:"#1e293b",textAlign:n.align==="right"?"right":"left",flex:1,marginLeft:"1rem"},children:P||"-"})]},n.key)})},S(a)))})}return e.jsx("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",overflow:"hidden",overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"1px solid #e2e8f0"},children:u.map(h=>e.jsx("th",{style:{padding:"1rem",textAlign:h.align||"left",fontSize:"0.875rem",fontWeight:"600",color:"#64748b"},children:h.label},h.key))})}),e.jsx("tbody",{children:v.map(h=>e.jsx("tr",{onClick:()=>p==null?void 0:p(h),style:{borderBottom:"1px solid #e2e8f0",transition:"background-color 0.2s",cursor:p?"pointer":"default"},onMouseEnter:a=>{p&&(a.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="white"},children:u.map(a=>{const n=a.render?a.render(h):h[a.key];return e.jsx("td",{style:{padding:"1rem",textAlign:a.align||"left",color:"#1e293b",fontSize:"0.875rem"},children:n||"-"},a.key)})},S(h)))})]})})},Ne=({isOpen:u,onClose:v,title:C,children:w,size:p="md",showCloseButton:S=!0})=>{const{isMobile:m}=re();if(c.useEffect(()=>(u?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[u]),c.useEffect(()=>{const n=g=>{g.key==="Escape"&&u&&v()};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[u,v]),!u)return null;const _=m?"100%":{sm:"400px",md:"600px",lg:"800px",xl:"1000px",full:"100%"}[p],h=m?"100vh":"auto",a=m?"100vh":"90vh";return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:m?"flex-end":"center",justifyContent:"center",zIndex:1e3,padding:m?0:"1rem",animation:"fadeIn 0.2s ease-in-out"},onClick:n=>{n.target===n.currentTarget&&v()},role:"dialog","aria-modal":"true","aria-labelledby":C?"modal-title":void 0,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:m?"16px 16px 0 0":"12px",padding:m?"1rem":"2rem",width:_,height:h,maxHeight:a,overflowY:"auto",overflowX:"hidden",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)",display:"flex",flexDirection:"column",animation:m?"slideInUp 0.3s ease-out":"fadeInUp 0.2s ease-out",position:"relative"},onClick:n=>n.stopPropagation(),children:[(C||S)&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid #e2e8f0"},children:[C&&e.jsx("h2",{id:"modal-title",style:{fontSize:m?"1.25rem":"1.5rem",fontWeight:"bold",color:"#1e293b",margin:0},children:C}),S&&e.jsx("button",{onClick:v,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:"8px",border:"none",backgroundColor:"#f1f5f9",color:"#64748b",cursor:"pointer",transition:"all 0.2s",marginLeft:C?"1rem":"auto"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor="#e2e8f0",n.currentTarget.style.color="#1e293b"},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="#f1f5f9",n.currentTarget.style.color="#64748b"},onTouchStart:n=>{n.currentTarget.style.backgroundColor="#e2e8f0"},onTouchEnd:n=>{setTimeout(()=>{n.currentTarget.style.backgroundColor="#f1f5f9"},200)},"aria-label":"Fechar",children:e.jsx(be,{size:20})})]}),e.jsx("div",{style:{flex:1,overflowY:"auto"},children:w})]})})},qe=()=>{var q;const[u,v]=c.useState([]),[C,w]=c.useState(!0),[p,S]=c.useState(""),[m,R]=c.useState({}),[_,h]=c.useState(1),[a]=c.useState(10),[n,g]=c.useState(!1),[P,A]=c.useState(null),[B,I]=c.useState({isOpen:!1,client:null}),[o,F]=c.useState(null),[N,M]=c.useState([]),[x,D]=c.useState(null),[se,J]=c.useState(!1),[d,y]=c.useState({}),[E,O]=c.useState(!1),[r,f]=c.useState({name:"",type:"PF",cpf:"",cnpj:"",phone:"",email:"",address_street:"",address_number:"",address_complement:"",address_neighborhood:"",address_city:"",address_state:"",address_zipcode:"",notes:"",active:!0});c.useEffect(()=>{L()},[p,m]);const L=async()=>{try{w(!0);const t={};p&&(t.search=p),Object.entries(m).forEach(([i,l])=>{l&&(t[i]=l)});const s=await z.get("/clients",{params:t});v(s.data)}catch(t){k("Erro ao carregar clientes"),console.error(t)}finally{w(!1)}},T=c.useMemo(()=>u.filter(t=>{if(m.type&&t.type!==m.type)return!1;if(m.active!==void 0){const s=m.active==="true";if(t.active!==s)return!1}return!0}),[u,m]),oe=c.useMemo(()=>{const t=(_-1)*a,s=t+a;return T.slice(t,s)},[T,_,a]),ie=Math.ceil(T.length/a);c.useEffect(()=>{h(1)},[m,p]),ge([{key:"n",ctrl:!0,action:()=>{W(),g(!0)},description:"Novo cliente"}]);const ne=async t=>{var s,i;if(t.preventDefault(),!ce()){k("Por favor, corrija os erros no formulário");return}try{const l={...r,cpf:r.type==="PF"?j(r.cpf):void 0,cnpj:r.type==="PJ"?j(r.cnpj):void 0,phone:r.phone?j(r.phone):void 0,address_zipcode:r.address_zipcode?j(r.address_zipcode):void 0};P?(await z.put(`/clients/${P.id}`,l),$(`Cliente "${r.name}" atualizado com sucesso!`)):(await z.post("/clients",l),$(`Cliente "${r.name}" criado com sucesso!`)),g(!1),W(),y({}),L()}catch(l){k(((i=(s=l.response)==null?void 0:s.data)==null?void 0:i.error)||"Erro ao salvar cliente")}},V=async t=>{try{const i=(await z.get(`/clients/${t.id}`)).data;A(i),f({name:i.name,type:i.type,cpf:i.cpf||"",cnpj:i.cnpj||"",phone:i.phone||"",email:i.email||"",address_street:i.address_street||"",address_number:i.address_number||"",address_complement:i.address_complement||"",address_neighborhood:i.address_neighborhood||"",address_city:i.address_city||"",address_state:i.address_state||"",address_zipcode:i.address_zipcode||"",notes:i.notes||"",active:i.active}),g(!0)}catch(s){console.error("Erro ao carregar cliente:",s),k("Erro ao carregar dados do cliente")}},le=t=>{I({isOpen:!0,client:t})},ae=async()=>{var t,s;if(B.client)try{await z.delete(`/clients/${B.client.id}`),$(`Cliente "${B.client.name}" excluído com sucesso!`),I({isOpen:!1,client:null}),L()}catch(i){k(((s=(t=i.response)==null?void 0:t.data)==null?void 0:s.error)||"Erro ao excluir cliente"),I({isOpen:!1,client:null})}},W=()=>{f({name:"",type:"PF",cpf:"",cnpj:"",phone:"",email:"",address_street:"",address_number:"",address_complement:"",address_neighborhood:"",address_city:"",address_state:"",address_zipcode:"",notes:"",active:!0}),A(null),y({})},de=async t=>{try{const i=(await z.get(`/clients/${t.id}`)).data;F(i);try{const l=await z.get(`/vehicles/client/${t.id}`);M(l.data)}catch(l){console.error("Erro ao carregar veículos:",l),M([])}J(!0);try{const l=await z.get(`/clients/${t.id}/statistics`);D(l.data)}catch(l){console.error("Erro ao carregar estatísticas:",l),D(null)}finally{J(!1)}}catch(s){console.error("Erro ao carregar cliente:",s),k("Erro ao carregar dados do cliente")}},ce=()=>{const t={};return r.type==="PF"&&r.cpf&&(j(r.cpf).length!==11?t.cpf="CPF deve ter 11 dígitos":Re(r.cpf)||(t.cpf="CPF inválido")),r.type==="PJ"&&r.cnpj&&(j(r.cnpj).length!==14?t.cnpj="CNPJ deve ter 14 dígitos":Ie(r.cnpj)||(t.cnpj="CNPJ inválido")),r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&(t.email="Email inválido"),y(t),Object.keys(t).length===0},H=(t,s,i)=>t==="PF"&&s?j(s).length===11?ee(s):s:t==="PJ"&&i?j(i).length===14?te(i):i:"-",me=t=>{const s=ee(t);if(f({...r,cpf:s}),d.cpf){const i={...d};delete i.cpf,y(i)}},pe=t=>{const s=te(t);if(f({...r,cnpj:s}),d.cnpj){const i={...d};delete i.cnpj,y(i)}},fe=t=>{const s=Q(t);f({...r,phone:s})},he=async t=>{const s=Z(t);if(f({...r,address_zipcode:s}),j(t).length===8){O(!0);try{const l=await We(s);if(l){if(f(b=>({...b,address_zipcode:s,address_street:l.logradouro||b.address_street,address_neighborhood:l.bairro||b.address_neighborhood,address_city:l.localidade||b.address_city,address_state:l.uf||b.address_state})),d.address_zipcode){const b={...d};delete b.address_zipcode,y(b)}}else y(b=>({...b,address_zipcode:"CEP não encontrado"}))}catch(l){console.error("Erro ao buscar CEP:",l),y(b=>({...b,address_zipcode:"Erro ao buscar CEP. Tente novamente."}))}finally{O(!1)}}else if(d.address_zipcode){const l={...d};delete l.address_zipcode,y(l)}};return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:"bold",color:"#1e293b",marginBottom:"0.5rem"},children:"Clientes"}),e.jsx("p",{style:{color:"#64748b",fontSize:"0.9rem"},children:"Gerencie o cadastro de clientes"})]}),e.jsxs("button",{onClick:()=>{W(),g(!0)},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#f97316",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:[e.jsx(je,{size:20}),"Novo Cliente"]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{position:"relative",maxWidth:"400px",marginBottom:"1rem"},children:[e.jsx(ve,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#64748b"}}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, email, telefone, CPF ou CNPJ...",value:p,onChange:t=>S(t.target.value),style:{width:"100%",padding:"0.75rem 1rem 0.75rem 2.5rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem",outline:"none"}})]}),e.jsx(xe,{filters:{type:{label:"Tipo",type:"select",options:[{label:"Pessoa Física",value:"PF"},{label:"Pessoa Jurídica",value:"PJ"}]},active:{label:"Status",type:"select",options:[{label:"Ativo",value:"true"},{label:"Inativo",value:"false"}]}},onFilterChange:R})]}),e.jsx(Fe,{columns:[{key:"client",label:"Cliente",render:t=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:t.type==="PF"?"#f97316":"#3b82f6",color:"white",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:t.type==="PF"?e.jsx(Ce,{size:20}):e.jsx(ze,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#1e293b"},children:t.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:t.type==="PF"?"Pessoa Física":"Pessoa Jurídica"})]})]})},{key:"document",label:"Documento",render:t=>H(t.type,t.cpf,t.cnpj)},{key:"contact",label:"Contato",render:t=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[t.phone&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[e.jsx(Y,{size:14,color:"#64748b"}),e.jsx("span",{style:{color:"#64748b"},children:t.phone})]}),t.email&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[e.jsx(U,{size:14,color:"#64748b"}),e.jsx("span",{style:{color:"#64748b"},children:t.email})]})]})},{key:"location",label:"Localização",render:t=>t.address_city&&t.address_state?`${t.address_city}/${t.address_state}`:"-"},{key:"actions",label:"Ações",align:"center",render:t=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[e.jsx("button",{onClick:s=>{s.stopPropagation(),de(t)},style:{padding:"0.5rem",backgroundColor:"#eff6ff",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"36px",minHeight:"36px"},title:"Ver detalhes",children:e.jsx(Se,{size:16,color:"#3b82f6"})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),V(t)},style:{padding:"0.5rem",backgroundColor:"#f1f5f9",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"36px",minHeight:"36px"},title:"Editar",children:e.jsx(G,{size:16,color:"#64748b"})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),le(t)},style:{padding:"0.5rem",backgroundColor:"#fee2e2",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"36px",minHeight:"36px"},title:"Excluir",children:e.jsx(_e,{size:16,color:"#ef4444"})})]})}],data:oe,loading:C,emptyMessage:"Nenhum cliente encontrado",keyExtractor:t=>t.id}),!C&&T.length>0&&e.jsx(ue,{currentPage:_,totalPages:ie,onPageChange:h,totalItems:T.length,itemsPerPage:a}),e.jsx(Ne,{isOpen:n,onClose:()=>{g(!1),W()},title:P?"Editar Cliente":"Novo Cliente",size:"lg",children:e.jsxs("form",{onSubmit:ne,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"Tipo *"}),e.jsxs("select",{value:r.type,onChange:t=>f({...r,type:t.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"},children:[e.jsx("option",{value:"PF",children:"Pessoa Física"}),e.jsx("option",{value:"PJ",children:"Pessoa Jurídica"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"Nome / Razão Social *"}),e.jsx("input",{type:"text",value:r.name,onChange:t=>f({...r,name:t.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[r.type==="PF"?e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"CPF *"}),e.jsx("input",{type:"text",value:r.cpf,onChange:t=>me(t.target.value),required:!0,maxLength:14,placeholder:"000.000.000-00",style:{width:"100%",padding:"0.75rem",border:d.cpf?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"}}),d.cpf&&e.jsx("p",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem"},children:d.cpf})]}):e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"CNPJ *"}),e.jsx("input",{type:"text",value:r.cnpj,onChange:t=>pe(t.target.value),required:!0,maxLength:18,placeholder:"00.000.000/0000-00",style:{width:"100%",padding:"0.75rem",border:d.cnpj?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"}}),d.cnpj&&e.jsx("p",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem"},children:d.cnpj})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"Telefone"}),e.jsx("input",{type:"text",value:r.phone,onChange:t=>fe(t.target.value),maxLength:15,placeholder:"(00) 00000-0000",style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"}})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"E-mail"}),e.jsx("input",{type:"email",value:r.email,onChange:t=>{if(f({...r,email:t.target.value}),d.email){const s={...d};delete s.email,y(s)}},onBlur:()=>{r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&y({...d,email:"Email inválido"})},style:{width:"100%",padding:"0.75rem",border:d.email?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"}}),d.email&&e.jsx("p",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem"},children:d.email})]}),e.jsxs("div",{style:{marginBottom:"1rem",paddingTop:"1rem",borderTop:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",color:"#1e293b"},children:"Endereço"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"CEP"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"text",value:r.address_zipcode,onChange:t=>he(t.target.value),onBlur:t=>{const s=j(t.target.value);s.length>0&&s.length!==8&&y(i=>({...i,address_zipcode:"CEP deve ter 8 dígitos"}))},maxLength:9,placeholder:"00000-000",disabled:E,style:{width:"100%",padding:"0.75rem",paddingRight:E?"2.5rem":"0.75rem",border:d.address_zipcode?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem",backgroundColor:E?"#f8fafc":"white"}}),E&&e.jsx("div",{style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center"},children:e.jsx(Pe,{size:16,className:"spinning",color:"#64748b"})})]}),d.address_zipcode&&e.jsx("div",{style:{marginTop:"0.25rem",fontSize:"0.75rem",color:"#ef4444"},children:d.address_zipcode}),r.address_zipcode&&j(r.address_zipcode).length===8&&!E&&!d.address_zipcode&&e.jsxs("div",{style:{marginTop:"0.25rem",fontSize:"0.75rem",color:"#10b981",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(X,{size:12}),"Endereço preenchido automaticamente"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"Rua"}),e.jsx("input",{type:"text",value:r.address_street,onChange:t=>f({...r,address_street:t.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"Número"}),e.jsx("input",{type:"text",value:r.address_number,onChange:t=>f({...r,address_number:t.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"}})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"Complemento"}),e.jsx("input",{type:"text",value:r.address_complement,onChange:t=>f({...r,address_complement:t.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"Bairro"}),e.jsx("input",{type:"text",value:r.address_neighborhood,onChange:t=>f({...r,address_neighborhood:t.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"Cidade"}),e.jsx("input",{type:"text",value:r.address_city,onChange:t=>f({...r,address_city:t.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("input",{type:"text",value:r.address_state,onChange:t=>f({...r,address_state:t.target.value.toUpperCase()}),maxLength:2,placeholder:"RS",style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem"}})]})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:"Observações"}),e.jsx("textarea",{value:r.notes,onChange:t=>f({...r,notes:t.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem",resize:"vertical",fontFamily:"inherit"}})]}),P&&e.jsx("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:r.active,onChange:t=>f({...r,active:t.target.checked}),style:{width:"18px",height:"18px"}}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#1e293b"},children:"Cliente ativo"})]})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),W()},style:{padding:"0.75rem 1.5rem",backgroundColor:"#f1f5f9",color:"#64748b",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:"Cancelar"}),e.jsx("button",{type:"submit",style:{padding:"0.75rem 1.5rem",backgroundColor:"#f97316",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:P?"Atualizar":"Criar"})]})]})}),o&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>F(null),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"2rem",width:"90%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b"},children:"Detalhes do Cliente"}),e.jsx("button",{onClick:()=>{F(null),D(null)},style:{padding:"0.5rem",backgroundColor:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",color:"#64748b"},children:"✕"})]}),x&&e.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem",color:"#1e293b"},children:"Estatísticas do Cliente"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(we,{size:18,color:"#3b82f6"}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:"Total de OS"})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b"},children:x.total_orders||0})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(ke,{size:18,color:"#10b981"}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:"Valor Total Gasto"})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x.total_spent||0)})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Be,{size:18,color:"#f59e0b"}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:"Garantias Ativas"})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b"},children:x.active_warranties||0})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(K,{size:18,color:"#64748b"}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:"Veículos"})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b"},children:x.total_vehicles||0})]})]}),x.last_visit&&e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ee,{size:16,color:"#64748b"}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:["Última visita: ",e.jsx("strong",{style:{color:"#1e293b"},children:new Date(x.last_visit).toLocaleDateString("pt-BR")})]})]}),x.pending_receivables&&x.pending_receivables.count>0&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fde047",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Te,{size:16,color:"#f59e0b"}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e"},children:[e.jsx("strong",{children:x.pending_receivables.count})," conta(s) pendente(s) - Total: ",e.jsx("strong",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x.pending_receivables.amount||0)})]})]}),x.recent_orders&&x.recent_orders.length>0&&e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",marginBottom:"0.75rem",color:"#1e293b"},children:"Últimas Ordens de Serviço"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:x.recent_orders.map(t=>e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1e293b"},children:t.order_number}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:[t.brand," ",t.model," ",t.plate&&`- ${t.plate}`]}),t.finished_at&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:new Date(t.finished_at).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#10b981"},children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.total||0)}),e.jsx("div",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",borderRadius:"12px",backgroundColor:t.status==="finished"?"#10b98120":t.status==="in_progress"?"#f59e0b20":"#64748b20",color:t.status==="finished"?"#10b981":t.status==="in_progress"?"#f59e0b":"#64748b",fontWeight:"600",display:"inline-block",marginTop:"0.25rem"},children:t.status==="finished"?"Finalizada":t.status==="in_progress"?"Em Andamento":t.status==="open"?"Aberta":t.status==="cancelled"?"Cancelada":t.status})]})]},t.id))})]})]}),se&&e.jsx("div",{style:{marginBottom:"2rem",padding:"1.5rem",textAlign:"center",color:"#64748b"},children:"Carregando estatísticas..."}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",color:"#1e293b"},children:"Informações Básicas"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.25rem"},children:"Nome"}),e.jsx("p",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#1e293b"},children:o.name})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.25rem"},children:"Tipo"}),e.jsx("p",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#1e293b"},children:o.type==="PF"?"Pessoa Física":"Pessoa Jurídica"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.25rem"},children:o.type==="PF"?"CPF":"CNPJ"}),e.jsx("p",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#1e293b"},children:H(o.type,o.cpf,o.cnpj)})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.25rem"},children:"Status"}),e.jsx("p",{style:{fontSize:"0.9rem",fontWeight:"500",color:o.active?"#10b981":"#ef4444"},children:o.active?"Ativo":"Inativo"})]})]})]}),(o.phone||o.email)&&e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",color:"#1e293b"},children:"Contato"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.phone&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Y,{size:16,color:"#64748b"}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#1e293b"},children:o.phone.includes("(")?o.phone:Q(o.phone)})]}),o.email&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(U,{size:16,color:"#64748b"}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#1e293b"},children:o.email})]})]})]}),(o.address_street||o.address_city||o.address_state)&&e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",color:"#1e293b",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(X,{size:18}),"Endereço"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[o.address_street&&e.jsxs("p",{style:{fontSize:"0.9rem",color:"#1e293b"},children:[o.address_street,o.address_number&&`, ${o.address_number}`,o.address_complement&&` - ${o.address_complement}`]}),o.address_neighborhood&&e.jsx("p",{style:{fontSize:"0.9rem",color:"#64748b"},children:o.address_neighborhood}),(o.address_city||o.address_state)&&e.jsx("p",{style:{fontSize:"0.9rem",color:"#64748b"},children:o.address_city&&o.address_state?`${o.address_city}/${o.address_state}`:o.address_city||o.address_state}),o.address_zipcode&&e.jsxs("p",{style:{fontSize:"0.9rem",color:"#64748b"},children:["CEP: ",Z(o.address_zipcode)]})]})]}),o.notes&&e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",color:"#1e293b"},children:"Observações"}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#1e293b",whiteSpace:"pre-wrap"},children:o.notes})]}),N.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",color:"#1e293b",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(K,{size:18}),"Veículos (",N.length,")"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:N.map(t=>e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("p",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#1e293b"},children:[t.brand," ",t.model," ",t.year?`(${t.year})`:""]}),t.plate&&e.jsxs("p",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:["Placa: ",t.plate]})]},t.id))})]}),N.length===0&&e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b",backgroundColor:"#f8fafc",borderRadius:"8px"},children:"Nenhum veículo cadastrado para este cliente"})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.75rem",marginTop:"2rem"},children:e.jsxs("button",{onClick:()=>{V(o),F(null)},style:{padding:"0.75rem 1.5rem",backgroundColor:"#f97316",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(G,{size:18}),"Editar"]})})]})}),e.jsx(ye,{isOpen:B.isOpen,title:"Confirmar Exclusão",message:`Tem certeza que deseja excluir o cliente "${(q=B.client)==null?void 0:q.name}"? Esta ação não pode ser desfeita.`,confirmText:"Excluir",cancelText:"Cancelar",type:"danger",onConfirm:ae,onCancel:()=>I({isOpen:!1,client:null})})]})};export{qe as default};
