import{j as e,a as A,u as X}from"./index-DNHKrThd.js";import{r as f,u as K}from"./react-vendor-BpgKpUzx.js";import{F as x,s as _,t as h,u as H,a as k,k as I,v as J,X as Z,w as q,E as ee,z as D,h as re,C as Y,W as oe,A as Q,x as $,y as se,D as U,G as O,U as P,P as N,S as te,H as ie}from"./ui-vendor-yLLZ9URH.js";import{S as W}from"./SkeletonLoader-DMsGFzU7.js";import{u as ne}from"./usePermission-Kf1Dlq5z.js";import{R as u,B as R,C as b,X as y,Y as g,T as j,a as S,L as M,b as L,c as G}from"./chart-vendor-qNS2pEQn.js";import"./pdf-vendor-BOaogWDS.js";const c=f.memo(({title:r,value:n,icon:t,trend:d,trendColor:m="#10b981",bgColor:i="white",iconColor:s="#64748b"})=>e.jsx("div",{style:{backgroundColor:i,borderRadius:"12px",padding:"1.25rem",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",display:"flex",flexDirection:"column",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",position:"relative",overflow:"hidden"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)",l.currentTarget.style.boxShadow="0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)"},role:"article","aria-label":`${r}: ${n}${d?`, ${d}`:""}`,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem",fontWeight:"500"},children:r}),e.jsx("div",{style:{fontSize:"clamp(1.5rem, 4vw, 2rem)",fontWeight:"bold",color:"#1e293b",lineHeight:"1.2",wordBreak:"break-word"},children:n}),d&&e.jsx("div",{style:{fontSize:"0.875rem",color:m,marginTop:"0.5rem",fontWeight:"500"},children:d})]}),e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:i==="white"?"#f1f5f9":"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},"aria-hidden":"true",children:e.jsx(t,{size:24,color:s})})]})}));c.displayName="KPICard";const le=({data:r})=>{const n=t=>({open:"Abertas",in_progress:"Em Andamento",waiting_parts:"Aguardando Peças",finished:"Finalizadas",cancelled:"Canceladas"})[t]||t;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsx(c,{title:"Minhas OS Ativas",value:r.kpis.my_active_orders.toString(),icon:x,bgColor:"#fff7ed",iconColor:"#f97316"}),e.jsx(c,{title:"Aguardando Peças",value:r.kpis.waiting_parts.toString(),icon:_,bgColor:"#fef3c7",iconColor:"#f59e0b"}),e.jsx(c,{title:"Tempo Médio (horas)",value:r.kpis.avg_completion_hours,icon:h,bgColor:"#eff6ff",iconColor:"#3b82f6"}),e.jsx(c,{title:"Finalizadas (Mês)",value:r.kpis.finished_this_month.toString(),icon:H,bgColor:"#f0fdf4",iconColor:"#10b981"}),e.jsx(c,{title:"Próximas OS",value:r.kpis.upcoming_orders.toString(),icon:k,bgColor:"#f0fdf4",iconColor:"#10b981"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(x,{size:18,color:"#3b82f6"}),"Minhas OS por Status"]}),e.jsx(u,{width:"100%",height:250,children:e.jsxs(R,{data:r.ordersByStatus.map(t=>({status:n(t.status),count:t.count})),children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"status"}),e.jsx(g,{}),e.jsx(j,{}),e.jsx(S,{dataKey:"count",fill:"#f97316"})]})})]}),e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_,{size:18,color:"#f97316"}),"Minhas OS (Últimos 7 Dias)"]}),e.jsx(u,{width:"100%",height:250,children:e.jsxs(M,{data:r.ordersLast7Days,children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"date"}),e.jsx(g,{}),e.jsx(j,{}),e.jsx(L,{type:"monotone",dataKey:"orders",stroke:"#f97316",strokeWidth:2})]})})]})]}),r.topClients&&r.topClients.length>0&&e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",marginBottom:"1.5rem"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(h,{size:18,color:"#10b981"}),"Top 5 Clientes (Últimos 30 Dias)"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.topClients.map(t=>e.jsx("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px",borderLeft:"3px solid #f97316"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#1e293b"},children:t.name}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:[t.ordersCount," OS"]})]})},t.id))})]})]})},ae=({profile:r})=>{const[n,t]=f.useState([]),[d,m]=f.useState(0),[i,s]=f.useState(!1),[l,v]=f.useState(!1),B=K(),z=async()=>{try{v(!0);const o=await A.get("/notifications");t(o.data.notifications||[]),m(o.data.unreadCount||0)}catch(o){console.error("Erro ao carregar notificações:",o)}finally{v(!1)}};f.useEffect(()=>{z();const o=setInterval(z,3e4);return()=>clearInterval(o)},[]);const w=async o=>{try{await A.put(`/notifications/${o}/read`),t(a=>a.map(p=>p.id===o?{...p,read:!0}:p)),m(a=>Math.max(0,a-1))}catch(a){console.error("Erro ao marcar como lida:",a),D.error("Erro ao marcar notificação como lida")}},F=async()=>{try{await A.put("/notifications/read-all"),t(o=>o.map(a=>({...a,read:!0}))),m(0),D.success("Todas as notificações foram marcadas como lidas")}catch(o){console.error("Erro ao marcar todas como lidas:",o),D.error("Erro ao marcar notificações como lidas")}},T=o=>{o.read||w(o.id),o.action_url&&(B(o.action_url),s(!1))},E=o=>{const a=new Date(o),C=Math.floor((new Date().getTime()-a.getTime())/1e3);return C<60?"agora":C<3600?`${Math.floor(C/60)}min atrás`:C<86400?`${Math.floor(C/3600)}h atrás`:`${Math.floor(C/86400)}d atrás`};return n.filter(o=>!o.read),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>s(!i),style:{position:"relative",padding:"0.5rem",backgroundColor:"transparent",border:"none",cursor:"pointer",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#64748b",transition:"all 0.2s"},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#f1f5f9"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="transparent"},children:[e.jsx(I,{size:20}),d>0&&e.jsx("span",{style:{position:"absolute",top:"0",right:"0",backgroundColor:"#ef4444",color:"white",borderRadius:"50%",width:"18px",height:"18px",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:d>9?"9+":d})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:()=>s(!1)}),e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 0.5rem)",right:0,width:"380px",maxHeight:"500px",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",zIndex:1e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(I,{size:18,color:"#64748b"}),e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e293b"},children:"Notificações"}),d>0&&e.jsx("span",{style:{backgroundColor:"#ef4444",color:"white",padding:"0.125rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600"},children:d})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[d>0&&e.jsxs("button",{onClick:F,style:{padding:"0.25rem 0.5rem",backgroundColor:"transparent",border:"none",cursor:"pointer",borderRadius:"6px",fontSize:"0.75rem",color:"#64748b",display:"flex",alignItems:"center",gap:"0.25rem"},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#f1f5f9"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="transparent"},children:[e.jsx(J,{size:14}),"Marcar todas"]}),e.jsx("button",{onClick:()=>s(!1),style:{padding:"0.25rem",backgroundColor:"transparent",border:"none",cursor:"pointer",borderRadius:"6px",color:"#64748b"},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#f1f5f9"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="transparent"},children:e.jsx(Z,{size:18})})]})]}),e.jsx("div",{style:{overflowY:"auto",flex:1},children:l?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Carregando..."}):n.length===0?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:[e.jsx(I,{size:32,style:{margin:"0 auto 0.5rem",opacity:.5}}),e.jsx("p",{children:"Nenhuma notificação"})]}):n.map(o=>e.jsx("div",{onClick:()=>T(o),style:{padding:"1rem",borderBottom:"1px solid #f1f5f9",cursor:o.action_url?"pointer":"default",backgroundColor:o.read?"white":"#f8fafc",transition:"background-color 0.2s"},onMouseEnter:a=>{o.action_url&&(a.currentTarget.style.backgroundColor="#f1f5f9")},onMouseLeave:a=>{a.currentTarget.style.backgroundColor=o.read?"white":"#f8fafc"},children:e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsx("div",{style:{flexShrink:0,width:"40px",height:"40px",borderRadius:"8px",backgroundColor:o.type==="order_finished"?"#fef3c7":"#e0e7ff",display:"flex",alignItems:"center",justifyContent:"center"},children:o.type==="order_finished"?e.jsx(x,{size:20,color:"#f59e0b"}):e.jsx(I,{size:20,color:"#6366f1"})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.25rem"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:o.read?"500":"600",color:"#1e293b",margin:0},children:o.title}),!o.read&&e.jsx("button",{onClick:a=>{a.stopPropagation(),w(o.id)},style:{padding:"0.25rem",backgroundColor:"transparent",border:"none",cursor:"pointer",borderRadius:"4px",color:"#64748b",flexShrink:0},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#e2e8f0"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="transparent"},children:e.jsx(q,{size:14})})]}),e.jsx("p",{style:{fontSize:"0.8125rem",color:"#64748b",margin:"0.25rem 0",lineHeight:"1.4"},children:o.message}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"#94a3b8"},children:E(o.created_at)}),o.action_url&&e.jsxs("span",{style:{fontSize:"0.75rem",color:"#3b82f6",display:"flex",alignItems:"center",gap:"0.25rem",fontWeight:"500"},children:["Ação rápida",e.jsx(ee,{size:12})]})]})]})]})},o.id))})]})]})]})},de=({data:r,formatCurrency:n})=>{const t=K(),d=s=>s.startsWith("+")?"#10b981":"#ef4444",m=s=>new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),i=s=>{t(`/financeiro?order_id=${s}&tab=receivables`)};return e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"1rem"},children:e.jsx(ae,{profile:"financial"})}),r.pendingOrders&&r.pendingOrders.length>0&&e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#fef3c7",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",border:"2px solid #fbbf24",marginBottom:"2rem"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(x,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1e293b",margin:0},children:"OS Finalizadas Aguardando Ação"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0.25rem 0 0 0"},children:[r.pendingOrdersCount," ",r.pendingOrdersCount===1?"ordem":"ordens"," finalizada(s) sem conta a receber"]})]})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.pendingOrders.slice(0,5).map(s=>e.jsxs("div",{style:{padding:"1rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #fde68a",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s"},onMouseEnter:l=>{l.currentTarget.style.boxShadow="0 4px 6px -1px rgb(0 0 0 / 0.1)",l.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:l=>{l.currentTarget.style.boxShadow="none",l.currentTarget.style.transform="translateY(0)"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx(x,{size:16,color:"#f59e0b"}),e.jsxs("span",{style:{fontWeight:"600",color:"#1e293b",fontSize:"0.875rem"},children:["OS #",s.order_number]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:m(s.finished_at)})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",fontSize:"0.8125rem",color:"#64748b"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(re,{size:14}),s.client_name||"Cliente não informado"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Y,{size:14}),s.brand," ",s.model," ",s.plate?`- ${s.plate}`:""]}),s.mechanic_name&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(oe,{size:14}),s.mechanic_name]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("div",{style:{textAlign:"right",marginRight:"0.5rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.25rem"},children:"Valor Total"}),e.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1e293b"},children:n(s.total)})]}),e.jsxs("button",{onClick:()=>i(s.id),style:{padding:"0.75rem 1.5rem",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},onMouseEnter:l=>{l.currentTarget.style.backgroundColor="#d97706"},onMouseLeave:l=>{l.currentTarget.style.backgroundColor="#f59e0b"},children:["Gerar Conta a Receber",e.jsx(Q,{size:16})]})]})]},s.id))}),r.pendingOrdersCount>5&&e.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:e.jsxs("button",{onClick:()=>t("/ordens-servico?status=finished"),style:{padding:"0.75rem 1.5rem",backgroundColor:"transparent",color:"#f59e0b",border:"2px solid #f59e0b",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"0.875rem"},children:["Ver todas as ",r.pendingOrdersCount," OS pendentes"]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsx(c,{title:"Contas a Pagar",value:n(r.kpis.payables_total),icon:$,bgColor:"#fee2e2",iconColor:"#ef4444",trend:`${r.kpis.payables_overdue} vencidas`,trendColor:"#ef4444"}),e.jsx(c,{title:"Contas a Receber",value:n(r.kpis.receivables_total),icon:h,bgColor:"#f0fdf4",iconColor:"#10b981",trend:`${r.kpis.receivables_overdue} vencidas`,trendColor:r.kpis.receivables_overdue>0?"#ef4444":"#10b981"}),e.jsx(c,{title:"Fluxo de Caixa",value:n(r.kpis.cash_flow_balance),icon:se,bgColor:r.kpis.cash_flow_balance>=0?"#f0fdf4":"#fee2e2",iconColor:r.kpis.cash_flow_balance>=0?"#10b981":"#ef4444"}),e.jsx(c,{title:"Receitas (Mês)",value:n(r.kpis.cash_flow_income),icon:U,bgColor:"#f0fdf4",iconColor:"#10b981",trend:r.comparison.income_trend,trendColor:d(r.comparison.income_trend)}),e.jsx(c,{title:"Despesas (Mês)",value:n(r.kpis.cash_flow_expense),icon:$,bgColor:"#fee2e2",iconColor:"#ef4444",trend:r.comparison.expense_trend,trendColor:d(r.comparison.expense_trend)}),e.jsx(c,{title:"Vencidas a Pagar",value:n(r.kpis.payables_overdue_amount),icon:O,bgColor:"#fee2e2",iconColor:"#ef4444"}),e.jsx(c,{title:"Vencidas a Receber",value:n(r.kpis.receivables_overdue_amount),icon:O,bgColor:"#fef3c7",iconColor:"#f59e0b"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(h,{size:18,color:"#10b981"}),"Receita dos Últimos 6 Meses"]}),e.jsx(u,{width:"100%",height:250,children:e.jsxs(M,{data:r.revenue6Months,children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"month"}),e.jsx(g,{}),e.jsx(j,{formatter:s=>n(s)}),e.jsx(L,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2})]})})]}),e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(k,{size:18,color:"#f97316"}),"Pagamentos (Últimos 7 Dias)"]}),e.jsx(u,{width:"100%",height:250,children:e.jsxs(R,{data:r.paymentsLast7Days,children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"date"}),e.jsx(g,{}),e.jsx(j,{formatter:s=>n(s)}),e.jsx(G,{}),e.jsx(S,{dataKey:"income",fill:"#10b981",name:"Receitas"}),e.jsx(S,{dataKey:"expense",fill:"#ef4444",name:"Despesas"})]})})]})]}),r.topClientsByRevenue&&r.topClientsByRevenue.length>0&&e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",marginBottom:"1.5rem"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(h,{size:18,color:"#10b981"}),"Top 5 Clientes por Receita (Últimos 30 Dias)"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.topClientsByRevenue.map(s=>e.jsx("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px",borderLeft:"3px solid #10b981"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#1e293b"},children:s.name}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:"600"},children:n(s.revenue)})]})},s.id))})]}),e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(h,{size:18,color:"#3b82f6"}),"Comparação Mensal"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"Receitas - Mês Atual"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b"},children:n(r.comparison.current_income)}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:["Mês anterior: ",n(r.comparison.previous_income)]})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"Despesas - Mês Atual"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b"},children:n(r.comparison.current_expense)}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:["Mês anterior: ",n(r.comparison.previous_expense)]})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"Variação de Receitas"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:d(r.comparison.income_trend)},children:r.comparison.income_trend})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"Variação de Despesas"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:d(r.comparison.expense_trend)},children:r.comparison.expense_trend})]})]})]})]})},ce=({data:r,formatCurrency:n})=>{const t=K(),d=i=>({scheduled:"Agendado",confirmed:"Confirmado",in_progress:"Em Andamento",completed:"Concluído",cancelled:"Cancelado"})[i]||i,m=i=>new Date(i).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"});return e.jsxs("div",{children:[r.pendingQuotes&&r.pendingQuotes.length>0&&e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#fff7ed",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",border:"2px solid #f97316",marginBottom:"2rem"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#f97316",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(x,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1e293b",margin:0},children:"Orçamentos Pendentes de Aprovação"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0.25rem 0 0 0"},children:[r.pendingQuotesCount," ",r.pendingQuotesCount===1?"orçamento":"orçamentos"," aguardando aprovação"]})]})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.pendingQuotes.slice(0,5).map(i=>e.jsxs("div",{style:{padding:"1rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #fed7aa",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s"},onMouseEnter:s=>{s.currentTarget.style.boxShadow="0 4px 6px -1px rgb(0 0 0 / 0.1)",s.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:s=>{s.currentTarget.style.boxShadow="none",s.currentTarget.style.transform="translateY(0)"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx(x,{size:16,color:"#f97316"}),e.jsx("span",{style:{fontWeight:"600",color:"#1e293b",fontSize:"0.875rem"},children:i.quote_number}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:m(i.created_at)})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",fontSize:"0.8125rem",color:"#64748b"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(P,{size:14}),i.client_name||"Cliente não informado"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Y,{size:14}),i.brand," ",i.model," ",i.plate?`- ${i.plate}`:""]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("div",{style:{textAlign:"right",marginRight:"0.5rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.25rem"},children:"Valor Total"}),e.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1e293b"},children:n(i.total)})]}),e.jsxs("button",{onClick:()=>t(`/orçamentos?approve=${i.id}`),style:{padding:"0.75rem 1.5rem",backgroundColor:"#f97316",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},onMouseEnter:s=>{s.currentTarget.style.backgroundColor="#ea580c"},onMouseLeave:s=>{s.currentTarget.style.backgroundColor="#f97316"},children:["Aprovar e Agendar",e.jsx(Q,{size:16})]})]})]},i.id))}),r.pendingQuotesCount>5&&e.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:e.jsxs("button",{onClick:()=>t("/orçamentos?status=open"),style:{padding:"0.75rem 1.5rem",backgroundColor:"transparent",color:"#f97316",border:"2px solid #f97316",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"0.875rem"},children:["Ver todos os ",r.pendingQuotesCount," orçamentos pendentes"]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsx(c,{title:"Agendamentos Hoje",value:r.kpis.today_appointments.toString(),icon:k,bgColor:"#eff6ff",iconColor:"#3b82f6"}),e.jsx(c,{title:"Agendamentos (Semana)",value:r.kpis.week_appointments.toString(),icon:k,bgColor:"#f0fdf4",iconColor:"#10b981"}),e.jsx(c,{title:"Clientes Novos (Mês)",value:r.kpis.new_clients_month.toString(),icon:P,bgColor:"#f0fdf4",iconColor:"#10b981"}),e.jsx(c,{title:"Orçamentos Pendentes",value:r.kpis.pending_quotes.toString(),icon:x,bgColor:"#fff7ed",iconColor:"#f97316"}),e.jsx(c,{title:"OS Sem Mecânico",value:r.kpis.unassigned_orders.toString(),icon:_,bgColor:"#fef3c7",iconColor:"#f59e0b"}),e.jsx(c,{title:"Orçamentos Convertidos",value:r.kpis.converted_quotes_month.toString(),icon:H,bgColor:"#f0fdf4",iconColor:"#10b981"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(k,{size:18,color:"#3b82f6"}),"Agendamentos de Hoje por Status"]}),e.jsx(u,{width:"100%",height:250,children:e.jsxs(R,{data:r.appointmentsByStatus.map(i=>({status:d(i.status),count:i.count})),children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"status"}),e.jsx(g,{}),e.jsx(j,{}),e.jsx(S,{dataKey:"count",fill:"#3b82f6"})]})})]}),e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_,{size:18,color:"#f97316"}),"Agendamentos (Próximos 7 Dias)"]}),e.jsx(u,{width:"100%",height:250,children:e.jsxs(M,{data:r.upcomingAppointments,children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"date"}),e.jsx(g,{}),e.jsx(j,{}),e.jsx(L,{type:"monotone",dataKey:"count",stroke:"#f97316",strokeWidth:2})]})})]})]}),r.topClients&&r.topClients.length>0&&e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",marginBottom:"1.5rem"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(h,{size:18,color:"#10b981"}),"Top 5 Clientes Mais Frequentes (Últimos 30 Dias)"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.topClients.map(i=>e.jsx("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px",borderLeft:"3px solid #3b82f6"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#1e293b"},children:i.name}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:[i.appointmentsCount," agendamentos"]})]})},i.id))})]})]})},V=({data:r,formatCurrency:n,calculateTrend:t,getTrendColor:d,getStatusLabel:m})=>{const i=t(r.comparison.current_month,r.comparison.previous_month),s=t(r.comparison.current_orders,r.comparison.previous_orders);return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},className:"dashboard-kpis",children:[e.jsx(c,{title:"Clientes",value:r.kpis.total_clients.toString(),icon:P,trend:void 0,trendColor:"#10b981",iconColor:"#10b981"}),e.jsx(c,{title:"OS Ativas",value:r.kpis.active_orders.toString(),icon:x,bgColor:"#fff7ed",iconColor:"#f97316"}),e.jsx(c,{title:"Faturamento do Mês",value:n(parseFloat(r.kpis.revenue_month.toString())),icon:U,trend:`${i} vs mês anterior`,trendColor:d(r.comparison.current_month,r.comparison.previous_month),bgColor:"#f0fdf4",iconColor:"#10b981"}),e.jsx(c,{title:"OS Finalizadas (Mês)",value:r.kpis.finished_orders_month.toString(),icon:x,trend:`${s} vs mês anterior`,trendColor:d(r.comparison.current_orders,r.comparison.previous_orders),bgColor:"#eff6ff",iconColor:"#3b82f6"}),e.jsx(c,{title:"Estoque Baixo",value:r.kpis.low_stock_count.toString(),icon:N,bgColor:"#fef3c7",iconColor:"#f59e0b"}),e.jsx(c,{title:"Contas Vencidas",value:(r.kpis.overdue_receivables+r.kpis.overdue_payables).toString(),icon:O,bgColor:"#fee2e2",iconColor:"#ef4444"}),e.jsx(c,{title:"Próximos Agendamentos",value:r.kpis.upcoming_appointments.toString(),icon:k,bgColor:"#f0fdf4",iconColor:"#10b981"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},className:"dashboard-charts",children:[e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(h,{size:18,color:"#10b981"}),"Receita dos Últimos 6 Meses"]}),e.jsx(u,{width:"100%",height:250,children:e.jsxs(M,{data:r.revenue,children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"month"}),e.jsx(g,{}),e.jsx(j,{formatter:l=>n(l)}),e.jsx(L,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2})]})})]}),e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(x,{size:18,color:"#3b82f6"}),"Distribuição de OS (Mês Atual)"]}),e.jsx(u,{width:"100%",height:250,children:e.jsxs(R,{data:r.services.map(l=>({status:m(l.status),count:l.count})),children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"status"}),e.jsx(g,{}),e.jsx(j,{}),e.jsx(S,{dataKey:"count",fill:"#f97316"})]})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},className:"dashboard-charts",children:[e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_,{size:18,color:"#f97316"}),"Vendas dos Últimos 7 Dias"]}),e.jsx(u,{width:"100%",height:250,children:e.jsxs(R,{data:r.dailySales,children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"date"}),e.jsx(g,{yAxisId:"left"}),e.jsx(g,{yAxisId:"right",orientation:"right"}),e.jsx(j,{formatter:(l,v)=>v==="revenue"?n(l):l}),e.jsx(G,{}),e.jsx(S,{yAxisId:"left",dataKey:"orders",fill:"#3b82f6",name:"OS"}),e.jsx(S,{yAxisId:"right",dataKey:"revenue",fill:"#10b981",name:"Receita"})]})})]}),e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(N,{size:18,color:"#10b981"}),"Top 5 Produtos (Últimos 30 Dias)"]}),r.topProducts.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.topProducts.map((l,v)=>e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px",borderLeft:"3px solid #f97316"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#1e293b"},children:l.name}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:["Qtd: ",l.quantity.toFixed(2)]})]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:"600"},children:n(l.revenue)})]},v))}):e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Nenhum produto vendido nos últimos 30 dias"})]})]}),e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(h,{size:18,color:"#3b82f6"}),"Comparação Mensal"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"Receita - Mês Atual"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b"},children:n(parseFloat(r.comparison.current_month.toString()))}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:["Mês anterior: ",n(parseFloat(r.comparison.previous_month.toString()))]})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"OS Finalizadas - Mês Atual"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b"},children:r.comparison.current_orders}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:["Mês anterior: ",r.comparison.previous_orders]})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"Variação de Receita"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:d(r.comparison.current_month,r.comparison.previous_month)},children:i})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"Variação de OS"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:d(r.comparison.current_orders,r.comparison.previous_orders)},children:s})]})]})]})]})},be=()=>{const{hasPermission:r,loading:n}=ne("dashboard","view"),{user:t}=X(),[d,m]=f.useState(null),[i,s]=f.useState(!0);f.useEffect(()=>{n||((t==null?void 0:t.profile)==="admin"||r?l():s(!1))},[r,n,t]);const l=async()=>{var o,a;try{s(!0);const p=(t==null?void 0:t.profile)==="admin"?"/dashboard/overview":"/dashboard/profile",C=await A.get(p);m(C.data)}catch(p){console.error("Erro ao carregar dashboard:",p),D.error(((a=(o=p.response)==null?void 0:o.data)==null?void 0:a.error)||"Erro ao carregar dados do dashboard")}finally{s(!1)}},v=o=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o),B=(o,a)=>{if(a===0)return o>0?"+100%":"0%";const p=(o-a)/a*100;return`${p>=0?"+":""}${p.toFixed(1)}%`},z=(o,a)=>a===0?o>0?"#10b981":"#64748b":o>=a?"#10b981":"#ef4444",w=o=>({open:"Abertas",in_progress:"Em Andamento",waiting_parts:"Aguardando Peças",finished:"Finalizadas",cancelled:"Canceladas"})[o]||o;if(n)return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{border:"4px solid #f3f4f6",borderTop:"4px solid #f97316",borderRadius:"50%",width:"48px",height:"48px",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),e.jsx("p",{style:{color:"#64748b"},children:"Verificando permissões..."})]})});if((t==null?void 0:t.profile)!=="admin"&&!r)return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh",flexDirection:"column",gap:"1rem",padding:"2rem"},children:e.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"2rem",maxWidth:"500px",textAlign:"center"},children:[e.jsx(te,{size:48,color:"#dc2626",style:{margin:"0 auto 1rem"}}),e.jsx("h2",{style:{color:"#dc2626",marginBottom:"0.5rem",fontSize:"1.5rem"},children:"Acesso Negado"}),e.jsx("p",{style:{color:"#991b1b",marginBottom:"1rem",fontSize:"1rem"},children:"Você não tem permissão para acessar o Dashboard."}),e.jsx("p",{style:{color:"#64748b",fontSize:"0.875rem"},children:"Entre em contato com o administrador para solicitar acesso."})]})});if(i)return e.jsxs("div",{children:[e.jsx("header",{style:{marginBottom:"2rem"},children:e.jsx(W,{type:"text",lines:2,width:"40%",height:"32px"})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:Array.from({length:7}).map((o,a)=>e.jsx(W,{type:"card"},a))}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},children:[e.jsx(W,{type:"card"}),e.jsx(W,{type:"card"})]})]});if(!d)return e.jsx("div",{style:{padding:"3rem",textAlign:"center",color:"#64748b"},children:"Erro ao carregar dados do dashboard"});const T=(()=>{const o={admin:{title:"Dashboard",subtitle:"Visão geral do seu negócio"},mechanic:{title:"Meu Dashboard",subtitle:"Suas ordens de serviço e desempenho"},financial:{title:"Dashboard Financeiro",subtitle:"Contas, receitas e despesas"},attendant:{title:"Dashboard de Atendimento",subtitle:"Agendamentos e clientes"}};return o[(t==null?void 0:t.profile)||"admin"]||o.admin})(),E=()=>{if(!d)return null;const o={data:d,formatCurrency:v};switch(t==null?void 0:t.profile){case"admin":return e.jsx(V,{...o,calculateTrend:B,getTrendColor:z,getStatusLabel:w});case"mechanic":return e.jsx(le,{...o});case"financial":return e.jsx(de,{...o});case"attendant":return e.jsx(ce,{...o});default:return e.jsx(V,{...o,calculateTrend:B,getTrendColor:z,getStatusLabel:w})}};return e.jsxs("div",{children:[e.jsxs("header",{style:{marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"clamp(1.5rem, 4vw, 1.875rem)",fontWeight:"bold",color:"#1e293b",marginBottom:"0.5rem",lineHeight:"1.2"},children:T.title}),e.jsx("p",{style:{color:"#64748b",fontSize:"clamp(0.875rem, 2vw, 0.9rem)"},children:T.subtitle})]}),e.jsxs("button",{onClick:l,disabled:i,style:{padding:"0.5rem 1rem",backgroundColor:"#f97316",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"600",opacity:i?.6:1,transition:"opacity 0.2s"},title:"Atualizar dados",children:[e.jsx(ie,{size:16,className:i?"spinning":""}),"Atualizar"]})]}),E()]})};export{be as default};
