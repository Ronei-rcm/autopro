import{r as n}from"./react-vendor-BpgKpUzx.js";import{u as p,d as C}from"./index-DNHKrThd.js";const T=(r,o)=>{const{user:s}=p(),{checkPermission:i,cache:f}=C(),[u,e]=n.useState(!1),[h,t]=n.useState(!0);return n.useEffect(()=>{(async()=>{if((s==null?void 0:s.profile)==="admin"){e(!0),t(!1);return}if(!s){e(!1),t(!1);return}const l=`${r}:${o}`,a=f[l],m=Date.now();if(a&&m-a.timestamp<3e4){e(a.value),t(!1);return}try{const c=await i(r,o);e(c)}catch(c){console.error("Error checking permission:",c),e(!1)}finally{t(!1)}})()},[r,o,s,i,f]),{hasPermission:u,loading:h}};export{T as u};
